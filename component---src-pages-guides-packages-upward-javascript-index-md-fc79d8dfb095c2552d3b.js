"use strict";(self.webpackChunkcommerce_pwa_studio=self.webpackChunkcommerce_pwa_studio||[]).push([[1252],{90076:function(e,a,n){n.r(a),n.d(a,{_frontmatter:function(){return o},default:function(){return x}});var t=n(87462),r=n(45987),d=(n(15007),n(64983)),m=n(91515);const l=["components"],o={},p=(i="InlineAlert",function(e){return console.warn("Component "+i+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)});var i;const s={_frontmatter:o},u=m.Z;function x(e){let{components:a}=e,n=(0,r.Z)(e,l);return(0,d.mdx)(u,(0,t.Z)({},s,n,{components:a,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"upward-javascript-implementation"},"UPWARD JavaScript implementation"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/tree/master/packages/upward-js"},(0,d.mdx)("inlineCode",{parentName:"a"},"upward-js")," package")," is a JavaScript implementation of an UPWARD server.\nThis implementation is able to run as standalone server or as an Express/Connect middleware."),(0,d.mdx)("h2",{id:"installation"},"Installation"),(0,d.mdx)("p",null,"Use the following command add the ",(0,d.mdx)("inlineCode",{parentName:"p"},"upward-js")," dependency to your project:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-sh"},"yarn add @magento/upward-js\n")),(0,d.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"If you followed the ",(0,d.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/tutorials/setup-storefront/"},"project setup tutorial"),", your project is already set up to use this implementation as an application server."),(0,d.mdx)("h2",{id:"usage"},"Usage"),(0,d.mdx)("p",null,"Use the command line, server API, or middleware API to launch the ",(0,d.mdx)("inlineCode",{parentName:"p"},"upward-js")," server."),(0,d.mdx)("h3",{id:"command-line"},"Command line"),(0,d.mdx)("p",null,"You can make this package available to the command line by installing it globally:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-sh"},"yarn global add @magento/upward-js\n")),(0,d.mdx)("p",null,"Launch the server in the foreground using the following command:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-sh"},"upward-js-server\n")),(0,d.mdx)("p",null,"This command does not take arguments.\nInstead, it uses the following environment variables for configuration:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Variable"),(0,d.mdx)("th",{parentName:"tr",align:null},"Required"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"UPWARD_JS_UPWARD_PATH")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,d.mdx)("td",{parentName:"tr",align:null},"The path to the server definition file.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"UPWARD_JS_BIND_LOCAL")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,d.mdx)("td",{parentName:"tr",align:null},"This must be set to 1.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"UPWARD_JS_LOG_URL")),(0,d.mdx)("td",{parentName:"tr",align:null},"No"),(0,d.mdx)("td",{parentName:"tr",align:null},"Prints the bound URL to stdout if set to 1.")))),(0,d.mdx)("h3",{id:"server-api"},"Server API"),(0,d.mdx)("p",null,"Require ",(0,d.mdx)("inlineCode",{parentName:"p"},"server")," from ",(0,d.mdx)("inlineCode",{parentName:"p"},"@magento/upward-js")," in your Node script to import the server into your project."),(0,d.mdx)("p",null,"Example:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-js"},'const { server } = require("@magento/upward-js");\n\nconst { app } = upward({\n  upwardPath: "./my-upward-server.yml",\n});\n\napp.listen(8000);\n')),(0,d.mdx)("h3",{id:"middleware-api"},"Middleware API"),(0,d.mdx)("p",null,"Use ",(0,d.mdx)("inlineCode",{parentName:"p"},"middleware")," from ",(0,d.mdx)("inlineCode",{parentName:"p"},"@magento/upward-js")," to use the middleware into your project.\nThis middleware is compatible with Express 4, Connect, and other frameworks that use this common pattern.\nIt returns a Promise for a function which handles request/response pairs."),(0,d.mdx)("p",null,"Example:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-js"},'const express = require("express");\nconst { middleware } = require("@magento/upward-js");\n\nconst app = express();\n\napp.use(otherMiddlewaresMaybe);\n\napp.use(middleware("./my-upward-server.yml"));\n')),(0,d.mdx)("p",null,"You can also pass an ",(0,d.mdx)("inlineCode",{parentName:"p"},"IOAdapter")," as a second argument to the middleware."))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-packages-upward-javascript-index-md-fc79d8dfb095c2552d3b.js.map