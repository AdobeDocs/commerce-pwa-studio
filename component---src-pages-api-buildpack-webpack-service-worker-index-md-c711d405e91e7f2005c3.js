(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[423],{91993:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return l},default:function(){return s}});var r=t(22122),a=t(19756),i=(t(15007),t(64983)),d=t(99536),o=["components"],l={},m={_frontmatter:l},p=d.Z;function s(e){var n=e.components,t=(0,a.Z)(e,o);return(0,i.mdx)(p,(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"service-worker"},"Service worker"),(0,i.mdx)("p",null,"A webpack plugin for configuring a ServiceWorker for different PWA development scenarios.\nThis plugin is a wrapper around the ",(0,i.mdx)("a",{parentName:"p",href:"https://developers.google.com/web/tools/workbox/guides/generate-service-worker/"},"Google Workbox Webpack Plugin"),".\nIt generates a caching ServiceWorker based on assets emitted by webpack."),(0,i.mdx)("h2",{id:"configurations"},"Configurations"),(0,i.mdx)("p",null,"The following configurations are available for this plugin:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"normal development")," - the ServiceWorker is disabled"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"service worker debugging")," - the ServiceWorker and hot-reloading are enabled.")),(0,i.mdx)("h2",{id:"serviceworkeroptions"},(0,i.mdx)("inlineCode",{parentName:"h2"},"ServiceWorker(options)")),(0,i.mdx)("p",null,"Plugin constructor for the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ServiceWorkerPlugin")," class."),(0,i.mdx)("h3",{id:"parameters"},"Parameters"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},(0,i.mdx)("inlineCode",{parentName:"strong"},"options: PluginOptions"))," - Configuration object for the ServiceWorkerPlugin")),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"PluginOptions")," object contains the following properties:"),(0,i.mdx)("table",null,(0,i.mdx)("thead",{parentName:"table"},(0,i.mdx)("tr",{parentName:"thead"},(0,i.mdx)("th",{parentName:"tr",align:null},"Property"),(0,i.mdx)("th",{parentName:"tr",align:null},"Type"),(0,i.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,i.mdx)("tbody",{parentName:"table"},(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"env")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"EnvironmentObject")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("strong",{parentName:"td"},"Required.")," An object that represents the current environment.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"paths")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"object")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("strong",{parentName:"td"},"Required.")," Map of important project locations. Must at least contain a ",(0,i.mdx)("inlineCode",{parentName:"td"},"root")," property set to the context (root directory) of the project.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"enableServiceWorkerDebugging")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"boolean")),(0,i.mdx)("td",{parentName:"tr",align:null},"Toggles service worker debugging.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"serviceWorkerFilename")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"string")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("strong",{parentName:"td"},"Required.")," The name of the ServiceWorker file this project creates.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"runtimeCacheAssetPath")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"string")),(0,i.mdx)("td",{parentName:"tr",align:null},"A remote URL or root path to assets the ServiceWorker should cache during runtime.")))),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"EnvironmentObject")," contains the following properties:"),(0,i.mdx)("table",null,(0,i.mdx)("thead",{parentName:"table"},(0,i.mdx)("tr",{parentName:"thead"},(0,i.mdx)("th",{parentName:"tr",align:null},"Property"),(0,i.mdx)("th",{parentName:"tr",align:null},"Type"),(0,i.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,i.mdx)("tbody",{parentName:"table"},(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"mode")),(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"string")),(0,i.mdx)("td",{parentName:"tr",align:null},"Must be ",(0,i.mdx)("strong",{parentName:"td"},"development")," or ",(0,i.mdx)("strong",{parentName:"td"},"production"),".")))),(0,i.mdx)("h2",{id:"example"},"Example"),(0,i.mdx)("p",null,"In ",(0,i.mdx)("inlineCode",{parentName:"p"},"webpack.config.js"),":"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},'const path = require("path");\nconst buildpack = require("@magento/pwa-buildpack");\nconst ServiceWorkerPlugin = buildpack.Webpack.ServiceWorkerPlugin;\n\nmodule.exports = async (env) => {\n  const config = {\n    /* webpack config, i.e. entry, output, etc. */\n    plugins: [\n      /* other plugins */\n      new ServiceWorkerPlugin({\n        env: {\n          mode: "development",\n        },\n\n        paths: {\n          output: path.resolve(__dirname, "web"),\n        },\n        enableServiceWorkerDebugging: true,\n        serviceWorkerFileName: "sw.js",\n        runtimeCacheAssetPath: "https://cdn.url",\n      }),\n    ],\n  };\n\n  return config;\n};\n')),(0,i.mdx)("h2",{id:"service-worker-debugging"},"Service worker debugging"),(0,i.mdx)("p",null,"When ",(0,i.mdx)("inlineCode",{parentName:"p"},"PluginOptions.enableServiceWorkerDebugging")," is set to ",(0,i.mdx)("inlineCode",{parentName:"p"},"true"),", hot reloading is enabled and the ServiceWorker is active in the document root."),(0,i.mdx)("p",null,"When this value is set to ",(0,i.mdx)("inlineCode",{parentName:"p"},"false"),", the ServiceWorker is disabled to prevent cache interruptions when hot reloading assets."))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-api-buildpack-webpack-service-worker-index-md-c711d405e91e7f2005c3.js.map