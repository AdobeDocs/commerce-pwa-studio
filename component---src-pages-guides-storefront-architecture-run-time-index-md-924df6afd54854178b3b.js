(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[2087],{1839:function(e,t,n){"use strict";n.r(t),n.d(t,{_frontmatter:function(){return d},default:function(){return m}});var o=n(22122),a=n(19756),r=(n(15007),n(64983)),i=n(99536),s=["components"],d={},c={_frontmatter:d},p=i.Z;function m(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.mdx)(p,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"run-time-architecture"},"Run time architecture"),(0,r.mdx)("p",null,"A PWA Studio storefront's runtime architecture describes how each of its pieces interact with Magento when it is deployed.\nThe following sections describe characteristics for the runtime architecture of storefronts built using PWA Studio.\nMany of these characteristics follow Magento's vision for ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/architecture/blob/master/design-documents/service-isolation.md"},"service isolation"),"."),(0,r.mdx)("h2",{id:"api-only-relationships"},"API-only relationships"),(0,r.mdx)("p",null,"A PWA Studio storefront application communicates with Magento using its external API.\nThose external API services communicate with Magento's internal service modules and returns any results through that same external API."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"GraphQL")," is the preferred API to use for client data and store behavior.\n",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.3/graphql/"},"GraphQL API")," coverage increases with every Magento release, but\nuntil full coverage is complete, developers can use the ",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.3/rest/bk-rest.html"},(0,r.mdx)("strong",{parentName:"a"},"REST API"))," to fill in existing coverage gaps."),(0,r.mdx)("p",null,"To make secure, admin-authorized calls, configure the storefront's ",(0,r.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/guides/packages/upward/"},"UPWARD")," server to make the request using REST or RPC."),(0,r.mdx)("p",null,"Use ",(0,r.mdx)("strong",{parentName:"p"},"HTTPS")," when passing requests through the UPWARD server to static and media resources in Magento."),(0,r.mdx)("h2",{id:"one-way-coupling"},"One-way coupling"),(0,r.mdx)("p",null,"The coupling between a PWA Studio storefront and Magento should go in one direction.\nThe storefront has a dependency on Magento, which is attached as a service, but\nthe Magento application should not have a dependency on the storefront."),(0,r.mdx)("h2",{id:"decoupled-deployments"},"Decoupled deployments"),(0,r.mdx)("p",null,"A PWA Studio storefront and its backing Magento instance should be deployed as separate instances on separate hardware.\nUsing ",(0,r.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/guides/packages/upward/"},"UPWARD")," allows you to deploy these applications using different technology stacks with the dependency configured at build-time."),(0,r.mdx)("p",null,"Another option is to deploy the storefront to the Magento server directly using the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/upward-php"},"PHP implementation of UPWARD"),".\nThis is a possible option if the Magento instance is hosted in the ",(0,r.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/tutorials/production-deployment/magento-cloud/"},"Magento cloud"),"."),(0,r.mdx)("h2",{id:"storefront-replacement-mechanism"},"Storefront replacement mechanism"),(0,r.mdx)("p",null,"A PWA Studio storefront replaces Magento's frontend theme."),(0,r.mdx)("p",null,"Since the coupling between the storefront and Magento is one way, Magento does not know to direct front end traffic to the storefront application.\nThis means that the Magento frontend theme, such as Luma, is still available by connecting directly to the Magento server."),(0,r.mdx)("p",null,"Use a ",(0,r.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Reverse_proxy"},"reverse proxy")," in your Magento server to route incoming frontend traffic to the storefront application.\nIf the storefront application is deployed in the same server as Magento, which can be the case if you are using ",(0,r.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/tutorials/production-deployment/magento-cloud/"},"Magento cloud")," hosting, then the ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento-upward-connector")," module handles the frontend replacement."))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-storefront-architecture-run-time-index-md-924df6afd54854178b3b.js.map