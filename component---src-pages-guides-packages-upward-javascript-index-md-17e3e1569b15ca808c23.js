"use strict";(self.webpackChunkcommerce_pwa_studio=self.webpackChunkcommerce_pwa_studio||[]).push([[1252],{90076:function(e,a,n){n.r(a),n.d(a,{_frontmatter:function(){return p},default:function(){return x}});var t,r=n(87462),d=n(63366),m=(n(15007),n(64983)),l=n(99536),o=["components"],p={},i=(t="InlineAlert",function(e){return console.warn("Component "+t+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)}),s={_frontmatter:p},u=l.Z;function x(e){var a=e.components,n=(0,d.Z)(e,o);return(0,m.mdx)(u,(0,r.Z)({},s,n,{components:a,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"upward-javascript-implementation"},"UPWARD JavaScript implementation"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/tree/master/packages/upward-js"},(0,m.mdx)("inlineCode",{parentName:"a"},"upward-js")," package")," is a JavaScript implementation of an UPWARD server.\nThis implementation is able to run as standalone server or as an Express/Connect middleware."),(0,m.mdx)("h2",{id:"installation"},"Installation"),(0,m.mdx)("p",null,"Use the following command add the ",(0,m.mdx)("inlineCode",{parentName:"p"},"upward-js")," dependency to your project:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-sh"},"yarn add @magento/upward-js\n")),(0,m.mdx)(i,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"If you followed the ",(0,m.mdx)("a",{parentName:"p",href:"/commerce-pwa-studio/tutorials/setup-storefront/"},"project setup tutorial"),", your project is already set up to use this implementation as an application server."),(0,m.mdx)("h2",{id:"usage"},"Usage"),(0,m.mdx)("p",null,"Use the command line, server API, or middleware API to launch the ",(0,m.mdx)("inlineCode",{parentName:"p"},"upward-js")," server."),(0,m.mdx)("h3",{id:"command-line"},"Command line"),(0,m.mdx)("p",null,"You can make this package available to the command line by installing it globally:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-sh"},"yarn global add @magento/upward-js\n")),(0,m.mdx)("p",null,"Launch the server in the foreground using the following command:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-sh"},"upward-js-server\n")),(0,m.mdx)("p",null,"This command does not take arguments.\nInstead, it uses the following environment variables for configuration:"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Variable"),(0,m.mdx)("th",{parentName:"tr",align:null},"Required"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"UPWARD_JS_UPWARD_PATH")),(0,m.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,m.mdx)("td",{parentName:"tr",align:null},"The path to the server definition file.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"UPWARD_JS_BIND_LOCAL")),(0,m.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,m.mdx)("td",{parentName:"tr",align:null},"This must be set to 1.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"UPWARD_JS_LOG_URL")),(0,m.mdx)("td",{parentName:"tr",align:null},"No"),(0,m.mdx)("td",{parentName:"tr",align:null},"Prints the bound URL to stdout if set to 1.")))),(0,m.mdx)("h3",{id:"server-api"},"Server API"),(0,m.mdx)("p",null,"Require ",(0,m.mdx)("inlineCode",{parentName:"p"},"server")," from ",(0,m.mdx)("inlineCode",{parentName:"p"},"@magento/upward-js")," in your Node script to import the server into your project."),(0,m.mdx)("p",null,"Example:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-js"},'const { server } = require("@magento/upward-js");\n\nconst { app } = upward({\n  upwardPath: "./my-upward-server.yml",\n});\n\napp.listen(8000);\n')),(0,m.mdx)("h3",{id:"middleware-api"},"Middleware API"),(0,m.mdx)("p",null,"Use ",(0,m.mdx)("inlineCode",{parentName:"p"},"middleware")," from ",(0,m.mdx)("inlineCode",{parentName:"p"},"@magento/upward-js")," to use the middleware into your project.\nThis middleware is compatible with Express 4, Connect, and other frameworks that use this common pattern.\nIt returns a Promise for a function which handles request/response pairs."),(0,m.mdx)("p",null,"Example:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-js"},'const express = require("express");\nconst { middleware } = require("@magento/upward-js");\n\nconst app = express();\n\napp.use(otherMiddlewaresMaybe);\n\napp.use(middleware("./my-upward-server.yml"));\n')),(0,m.mdx)("p",null,"You can also pass an ",(0,m.mdx)("inlineCode",{parentName:"p"},"IOAdapter")," as a second argument to the middleware."))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-packages-upward-javascript-index-md-17e3e1569b15ca808c23.js.map