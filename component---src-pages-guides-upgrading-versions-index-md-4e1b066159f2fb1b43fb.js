"use strict";(self.webpackChunkcommerce_pwa_studio=self.webpackChunkcommerce_pwa_studio||[]).push([[2910],{54823:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return r},default:function(){return m}});var n=a(87462),o=a(63366),i=(a(15007),a(64983)),s=a(91515),p=["components"],r={},d={_frontmatter:r},l=s.Z;function m(e){var t=e.components,a=(0,o.Z)(e,p);return(0,i.mdx)(l,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"upgrading-versions"},"Upgrading versions"),(0,i.mdx)("p",null,"Upgrading to the latest PWA Studio version gives your project access to the new features, bugfixes, and improvements associated with that release.\nThis topic provides general guidance and best practices for upgrading your storefront project to use the newest PWA Studio release."),(0,i.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.mdx)("p",null,"The contents of this topic applies to storefront projects setup according to the ",(0,i.mdx)("a",{parentName:"p",href:"../../tutorials/setup-storefront/index.md"},"Setup your project")," tutorial.\nThese projects use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"venia-concept")," package as a template to set up the directory structure and project dependencies.\nThis is the recommended setup for new projects because it makes version upgrades easier."),(0,i.mdx)("h2",{id:"update-dependencies"},"Update dependencies"),(0,i.mdx)("p",null,"The main updates you need to make in your storefront project are the dependency versions in your ",(0,i.mdx)("inlineCode",{parentName:"p"},"package.json")," file.\nPWA Studio packages are independently versioned, which means their versions may not be the same as the main PWA Studio release version."),(0,i.mdx)("p",null,"If your project uses ",(0,i.mdx)("inlineCode",{parentName:"p"},"yarn"),", you can call ",(0,i.mdx)("inlineCode",{parentName:"p"},"yarn add")," on each of the ",(0,i.mdx)("inlineCode",{parentName:"p"},"@magento")," packages.\nThis automatically updates the ",(0,i.mdx)("inlineCode",{parentName:"p"},"package.json")," file in your project and install the latest versions."),(0,i.mdx)("p",null,"Sample command:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"yarn add @magento/eslint-config @magento/pagebuilder @magento/peregrine @magento/pwa-buildpack @magento/upward-js @magento/venia-ui\n")),(0,i.mdx)("h3",{id:"manual-updates"},"Manual updates"),(0,i.mdx)("p",null,"If your project uses ",(0,i.mdx)("inlineCode",{parentName:"p"},"npm"),", you can still manually edit the ",(0,i.mdx)("inlineCode",{parentName:"p"},"package.json")," file with the latest published version.\nCompare the contents of your project's ",(0,i.mdx)("inlineCode",{parentName:"p"},"package.json")," file with the one in ",(0,i.mdx)("inlineCode",{parentName:"p"},"venia-concept")," to see the latest published versions."),(0,i.mdx)("p",null,"You can find the latest package versions by opening the ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/blob/develop/packages/venia-concept/package.json"},"template project's ",(0,i.mdx)("inlineCode",{parentName:"a"},"package.json")," file")," in GitHub and using the version switcher to view the latest release version under the ",(0,i.mdx)("strong",{parentName:"p"},"Tags")," tab.\nFor example, the ",(0,i.mdx)("inlineCode",{parentName:"p"},"package.json")," file for the ",(0,i.mdx)("strong",{parentName:"p"},"v10.0.0")," release is at:"),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/blob/v10.0.0/packages/venia-concept/package.json"},"https://github.com/magento/pwa-studio/blob/v10.0.0/packages/venia-concept/package.json")),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"550px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"98.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/static/c3e807aea34f07844506b3b6d0174f6c/5530d/switch-versions.webp 320w","/static/c3e807aea34f07844506b3b6d0174f6c/7df4b/switch-versions.webp 550w"],sizes:"(max-width: 550px) 100vw, 550px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/static/c3e807aea34f07844506b3b6d0174f6c/dd4a7/switch-versions.png 320w","/static/c3e807aea34f07844506b3b6d0174f6c/8c3ad/switch-versions.png 550w"],sizes:"(max-width: 550px) 100vw, 550px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/static/c3e807aea34f07844506b3b6d0174f6c/8c3ad/switch-versions.png",alt:"Switching versions in GitHub",title:"Switching versions in GitHub",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"Use the contents of this file to update the ",(0,i.mdx)("inlineCode",{parentName:"p"},"@magento")," packages listed in your project's ",(0,i.mdx)("inlineCode",{parentName:"p"},"package.json")," file.\nNext, run ",(0,i.mdx)("inlineCode",{parentName:"p"},"npm install")," to install the updated packages."),(0,i.mdx)("h2",{id:"update-template-files"},"Update template files"),(0,i.mdx)("p",null,"Updating your dependencies does not update the initial template files in your project.\nYou must identify and apply these changes manually so that they do not conflict with your own changes.\nUse the instructions in the following sections to update your project's template files."),(0,i.mdx)("h3",{id:"clone-pwa-studio"},"Clone PWA Studio"),(0,i.mdx)("p",null,"To compare changes between the source template and your project, you need a local clone of the PWA Studio repository.\nUse the following command to create a local clone:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"git clone git@github.com:magento/pwa-studio.git\n")),(0,i.mdx)("p",null,"If you already have a copy of the repository, use the following command to update it with the latest changes:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"git fetch origin\n")),(0,i.mdx)("p",null,"Next, checkout the ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/tags"},"version tag")," of the recent release.\nFor example, the following command checks out the state of the repository at version ",(0,i.mdx)("strong",{parentName:"p"},"10.0.0"),":"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"git checkout v10.0.0\n")),(0,i.mdx)("h3",{id:"identify-which-template-files-changed"},"Identify which template files changed"),(0,i.mdx)("p",null,"You can use the PWA Studio repository clone to identify which files changed between versions in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"venia-concept")," template package using ",(0,i.mdx)("inlineCode",{parentName:"p"},"git diff"),"."),(0,i.mdx)("p",null,"For example:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"cd packages/venia-concept && \\\ngit diff --name-only --relative v9.0.1..v10.0.0 . ../\n")),(0,i.mdx)("p",null,"This command navigates to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"venia-concept")," package and uses the ",(0,i.mdx)("inlineCode",{parentName:"p"},"git diff")," command to list the files changed between the ",(0,i.mdx)("inlineCode",{parentName:"p"},"v9.0.1")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"v10.0.0")," version tags:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"_buildpack/__tests__/create.spec.js\n_buildpack/create.js\npackage.json\nprettier.config.js\nsrc/.storybook/preview-body.html\nsrc/.storybook/webpack.config.js\nsrc/ServiceWorker/Utilities/__tests__/imageCacheHandler.spec.js\nsrc/ServiceWorker/Utilities/imageCacheHandler.js\nsrc/ServiceWorker/setupWorkbox.js\nsrc/registerSW.js\ntemplate.html\nwebpack.config.js\n")),(0,i.mdx)("h3",{id:"apply-updates"},"Apply updates"),(0,i.mdx)("p",null,"How you apply updates to the template files in your project depends on whether you made changes to that file or not.\nIf you did not make any changes to your project's template file, you can safely copy over the file into your project to overwrite and update it."),(0,i.mdx)("p",null,"If your project's template file contains any customizations, you must manually apply the updates from the new version.\nTo find the changes you need to apply, you can use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"git diff")," command on individual files:"),(0,i.mdx)("p",null,"For example, the following command shows the updates you would need to make to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"webpack.config.js")," file:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"git diff v9.0.1..v10.0.0 webpack.config.js\n")),(0,i.mdx)("p",null,"You can also use one of the many ",(0,i.mdx)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/search?term=diff&target=VSCode&category=All%20categories&sortBy=Relevance"},"diff tools in Visual Studio Code")," or a standalone application, such as ",(0,i.mdx)("a",{parentName:"p",href:"https://desktop.github.com/"},"GitHub's desktop application"),", to make these comparisons easier."),(0,i.mdx)("h2",{id:"check-for-new-environment-variables"},"Check for new environment variables"),(0,i.mdx)("p",null,"To check for new or updated environment variables, run a diff on the ",(0,i.mdx)("inlineCode",{parentName:"p"},"envVarDefinitions.json")," file in the ",(0,i.mdx)("strong",{parentName:"p"},"pwa-buildpack")," package.\nFor example, the following command shows the updates on that file between versions ",(0,i.mdx)("inlineCode",{parentName:"p"},"v9.0.1")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"v10.0.0"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-sh"},"git diff v9.0.1...v10.0.0 packages/pwa-buildpack/envVarDefinitions.json\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"NOTE:"),"\nIf you need to make updates to your local ",(0,i.mdx)("inlineCode",{parentName:"p"},"env")," file, you may also need to update the environment variables in your staging and production environments."))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-upgrading-versions-index-md-4e1b066159f2fb1b43fb.js.map