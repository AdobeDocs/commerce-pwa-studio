"use strict";(self.webpackChunkcommerce_pwa_studio=self.webpackChunkcommerce_pwa_studio||[]).push([[6418],{25331:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return s},default:function(){return d}});var o=n(87462),a=n(45987),i=(n(35776),n(3905)),p=n(91515);const r=["components"],s={},m={_frontmatter:s},l=p.Z;function d(e){let{components:t}=e,n=(0,a.Z)(e,r);return(0,i.mdx)(l,(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"set-up-component"},"Set up component"),(0,i.mdx)("p",null,"Setting up your component is about getting the essential component files in place so that your component is actively participating in the Page Builder component framework. After you create these files and wire them into the component framework, you can focus all your attention on developing each file to faithfully recreate your content type as a PWA component. The following steps highlight the tasks for setting up your component:"),(0,i.mdx)("p",null,(0,i.mdx)("img",{parentName:"p",src:"/commerce-pwa-studio/assets/947d6a2de7d959ebc296251141d1059a/SetupComponentSteps.svg",alt:"Component setup steps"})),(0,i.mdx)("h2",{id:"step-1-create-starter-files"},"Step 1: Create starter files"),(0,i.mdx)("p",null,"The first thing you need to do within PWA Studio is create the directory and skeleton files needed for your component, as follows:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"configAggregator.js")," (required) - Function to retrieve content and styling properties from your content type's master format HTML."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"myComponent.js")," (required) - React component for populating properties that correspond to the original Page Builder content type. For our ExampleQuote, we use ",(0,i.mdx)("inlineCode",{parentName:"li"},"exampleQuote.js"),"."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"myComponent.css")," (optional but usually needed) - CSS classes that provide addition styles needed to present your component as desired. For our ExampleQuote, we use ",(0,i.mdx)("inlineCode",{parentName:"li"},"exampleQuote.css"),"."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("strong",{parentName:"li"},"index.js")," (required) - Entry file needed to identify your component in PWA Studio.")),(0,i.mdx)("p",null,"Currently, you need to add your content type's component, like ",(0,i.mdx)("inlineCode",{parentName:"p"},"ExampleQuote"),", to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ContentTypes")," directory, where the native Page Builder components are kept. This will change when we implement different rules for extending Page Builder components. But for now, add your custom content type components as shown here:"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"606px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"58.4375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-pwa-studio/static/6621ec5b70d3e49bf8b43f4ad435bc78/5530d/PageBuilderFilesSetup.webp 320w","/commerce-pwa-studio/static/6621ec5b70d3e49bf8b43f4ad435bc78/e5c51/PageBuilderFilesSetup.webp 606w"],sizes:"(max-width: 606px) 100vw, 606px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-pwa-studio/static/6621ec5b70d3e49bf8b43f4ad435bc78/dd4a7/PageBuilderFilesSetup.png 320w","/commerce-pwa-studio/static/6621ec5b70d3e49bf8b43f4ad435bc78/cec09/PageBuilderFilesSetup.png 606w"],sizes:"(max-width: 606px) 100vw, 606px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-pwa-studio/static/6621ec5b70d3e49bf8b43f4ad435bc78/cec09/PageBuilderFilesSetup.png",alt:"Component file structure",title:"Component file structure",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"Starter code for the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ExampleQuote")," component files is provided as follows."),(0,i.mdx)("h3",{id:"configaggregatorjs"},"configAggregator.js"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},"export default (node, props) => {\n  return {\n    // Retrieve properties from node here\n  };\n};\n")),(0,i.mdx)("h3",{id:"examplequotecss"},"exampleQuote.css"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-css"},"/* class for testing setup */\n.testClass {\n  line-height: 1.4em;\n  font-size: 1em;\n  color: #0066cc;\n}\n")),(0,i.mdx)("h3",{id:"examplequotejs"},"exampleQuote.js"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport { mergeClasses } from "../../../../../classify";\nimport defaultClasses from "./exampleQuote.css";\nimport { shape, string } from "prop-types";\n\n// Component for testing setup\nconst ExampleQuote = (props) => {\n  const classes = mergeClasses(defaultClasses, props.classes);\n  return (\n    <div className={classes.testClass}>\n      <div>Content Type: {props.contentType}</div>\n      <div>Appearance: {props.appearance}</div>\n    </div>\n  );\n};\n\nExampleQuote.propTypes = {\n  classes: shape({\n    testClass: string,\n  }),\n  contentType: string,\n  appearance: string,\n};\n\nexport default ExampleQuote;\n')),(0,i.mdx)("h3",{id:"indexjs"},"index.js"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},'export { default } from "./exampleQuote";\n')),(0,i.mdx)("h2",{id:"step-2-configure-component"},"Step 2: Configure component"),(0,i.mdx)("p",null,"Configuring your component is about connecting your component to the Page Builder component framework. The framework provides a static config object (in ",(0,i.mdx)("inlineCode",{parentName:"p"},"config.js"),") that acts as a kind of registry of content types supported within PWA Studio. To include support for your custom content type component, you'll need to add an entry to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"config.js"),":"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"606px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"20.3125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-pwa-studio/static/326618482ec26eb6b46af06f83617523/5530d/PageBuilderConfigFile.webp 320w","/commerce-pwa-studio/static/326618482ec26eb6b46af06f83617523/e5c51/PageBuilderConfigFile.webp 606w"],sizes:"(max-width: 606px) 100vw, 606px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-pwa-studio/static/326618482ec26eb6b46af06f83617523/dd4a7/PageBuilderConfigFile.png 320w","/commerce-pwa-studio/static/326618482ec26eb6b46af06f83617523/cec09/PageBuilderConfigFile.png 606w"],sizes:"(max-width: 606px) 100vw, 606px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-pwa-studio/static/326618482ec26eb6b46af06f83617523/cec09/PageBuilderConfigFile.png",alt:"Component config file",title:"Component config file",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"Open the ",(0,i.mdx)("inlineCode",{parentName:"p"},"config.js")," file and ",(0,i.mdx)("inlineCode",{parentName:"p"},"import")," your ",(0,i.mdx)("inlineCode",{parentName:"p"},"configAggregator"),". The import statement for our ExampleQuote is shown here:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},'import exampleQuoteConfigAggregator from "./ContentTypes/ExampleQuote/configAggregator";\n')),(0,i.mdx)("p",null,"Add an entry that references your ",(0,i.mdx)("inlineCode",{parentName:"p"},"configAggregator")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"component"),", using the name of your content type as the ",(0,i.mdx)("inlineCode",{parentName:"p"},"key"),". For our ",(0,i.mdx)("inlineCode",{parentName:"p"},"ExampleQuote"),", the name of the Quote content type is ",(0,i.mdx)("inlineCode",{parentName:"p"},"example_quote"),", so the entry for our Quote component (",(0,i.mdx)("inlineCode",{parentName:"p"},"ExampleQuote"),") in the config file looks like this:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},"Quote_Custom: {\n    configAggregator: exampleQuoteConfigAggregator,\n    component: React.lazy(() => import('./ContentTypes/ExampleQuote'))\n},\n")),(0,i.mdx)("h3",{id:"a-note-about-lazy-loading-components"},"A note about lazy loading components"),(0,i.mdx)("p",null,"When building PWAs, performance is key. That's why we recommend loading less critical components using ",(0,i.mdx)("inlineCode",{parentName:"p"},"React.lazy"),". This will result in a very slight delay in that content rendering but will ensure we don't bloat the bundle size for the store. For more information, see the ",(0,i.mdx)("a",{parentName:"p",href:"https://reactjs.org/docs/code-splitting.html#reactlazy"},"react lazy loading")," docs on the React site."),(0,i.mdx)("p",null,"By default, we apply ",(0,i.mdx)("inlineCode",{parentName:"p"},"React.lazy")," to the following content types: Banner, Slider, Slide Item, Tab, Tab Item, Button, Button Item, Block, Products, HTML, and Divider."),(0,i.mdx)("p",null,"To have your component loaded lazily you simply have to wrap your ",(0,i.mdx)("inlineCode",{parentName:"p"},"component")," reference in a call to ",(0,i.mdx)("inlineCode",{parentName:"p"},"React.lazy")," as previously shown for the ExampleQuote component:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},'component: React.lazy(() => import("./ContentTypes/ExampleQuote"));\n')),(0,i.mdx)("h2",{id:"test-the-component-setup"},"Test the component setup"),(0,i.mdx)("p",null,"After adding these files and hooking them up to the framework through the configuration file (",(0,i.mdx)("inlineCode",{parentName:"p"},"config.js"),"), your skeleton component will appear on the Venia home page:"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"28.750000000000004%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/5530d/ConfigureComponentOutput.webp 320w","/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/0c8fb/ConfigureComponentOutput.webp 640w","/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/309d5/ConfigureComponentOutput.webp 650w"],sizes:"(max-width: 650px) 100vw, 650px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/dd4a7/ConfigureComponentOutput.png 320w","/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/0f09e/ConfigureComponentOutput.png 640w","/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/663f3/ConfigureComponentOutput.png 650w"],sizes:"(max-width: 650px) 100vw, 650px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-pwa-studio/static/759e9690d2efa34cbbdb9af9923f3b0c/663f3/ConfigureComponentOutput.png",alt:"ExampleQuote component rendered with starter code",title:"ExampleQuote component rendered with starter code",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"If you see this rendering without errors in the Venia app, you are ready to start developing your content type component."),(0,i.mdx)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.mdx)("p",null,"If you have errors, make sure you have:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Copied the correct starter code for each of the four files."),(0,i.mdx)("li",{parentName:"ol"},"Added the correct name of your content type to the ",(0,i.mdx)("inlineCode",{parentName:"li"},"config.js")," file (",(0,i.mdx)("inlineCode",{parentName:"li"},"Quote_Custom")," if you are using the Quote content type).")))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-integrations-pagebuilder-custom-components-setup-index-md-2a04825c116d53af5ddf.js.map