{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/api/buildpack/webpack/configure/index.md"],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"mappings":"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","file":"component---src-pages-api-buildpack-webpack-configure-index-md-dde1432d78332d05c49a.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-pwa-studio/commerce-pwa-studio/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"configure-webpack\"\n    }}>{`Configure Webpack`}</h1>\n    <p>{`Use the `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` tool to make further modifications to PWA Studio's default Webpack configuration.`}</p>\n    <h2 {...{\n      \"id\": \"configurewebpackoptions\"\n    }}><inlineCode parentName=\"h2\">{`configureWebpack(options)`}</inlineCode></h2>\n    <p>{`A function that returns a Webpack configuration object.`}</p>\n    <p>{`Import and call `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` in your project's `}<inlineCode parentName=\"p\">{`webpack.config.js`}</inlineCode>{` file to generate a Webpack configuration object suited to your PWA Studio project and its dependencies.`}</p>\n    <p><strong parentName=\"p\">{`Returns:`}</strong>{`\nA `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"\n      }}>{`Promise`}</a>{` that resolves to a configuration object for webpack.`}</p>\n    <p>{`The generated configuration object tells Webpack how to process the project's source code and generate bundles.\nIt is a `}<a parentName=\"p\" {...{\n        \"href\": \"https://webpack.js.org/configuration/\"\n      }}>{`complete Webpack configuration object`}</a>{` that is ready for immediate use.`}</p>\n    <p>{`You can also modify it in your `}<inlineCode parentName=\"p\">{`webpack.config.js`}</inlineCode>{` before returning it out of your own configure function.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p><inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` is asynchronous.\nWebpack accepts a Promise for a configuration, so\nyou can return the result of `}<inlineCode parentName=\"p\">{`configureWebpack`}</inlineCode>{` directly out of the exported function in `}<inlineCode parentName=\"p\">{`webpack.config.js`}</inlineCode>{`.\nIf you want to modify the configuration, you must use `}<inlineCode parentName=\"p\">{`await`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"parameters\"\n    }}>{`Parameters`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`options`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Object`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Options for generating the configuration object`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`options.context`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`String`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><em parentName=\"td\">{`Required.`}</em>{` The path of the project root directory`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`options.vendor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`String[]`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A list of module names to force Webpack to include in a \"commons\" bundle`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`options.special`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Object`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`An object that maps module names to a set of configuration.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`To make your project performant, limit the `}<inlineCode parentName=\"p\">{`options.vendor`}</inlineCode>{` list to strictly necessary dependencies required by most or all modules.`}</p>\n    <h3 {...{\n      \"id\": \"special-flags\"\n    }}>{`Special flags`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`options.special`}</inlineCode>{` parameter tells `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` to create special configurations for specific modules.`}</p>\n    <p>{`By default, Webpack treats the source code of your project very differently than the dependency code.\nWebpack does so because public NPM modules are not reliably compatible with advanced JavaScript features.\nDevelopers get around this by customizing the Webpack configuration rules.`}</p>\n    <p><inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` offers a simple API: for each module you want to treat special, add these named flags.\nIt will adjust Webpack configuration to run that module and its files through additional build steps.`}</p>\n    <h4 {...{\n      \"id\": \"esmodules-flag\"\n    }}><inlineCode parentName=\"h4\">{`esModules`}</inlineCode>{` flag`}</h4>\n    <p>{`If `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` generates the configuration for processing `}<inlineCode parentName=\"p\">{`.js`}</inlineCode>{` files from the named module as ES Modules.\nThis allows Webpack to use advanced optimizations on them, but\nit may fail if the module contains noncompliant code.`}</p>\n    <h4 {...{\n      \"id\": \"cssmodules-flag\"\n    }}><inlineCode parentName=\"h4\">{`cssModules`}</inlineCode>{` flag`}</h4>\n    <p>{`If `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` generates the configuration for processing `}<inlineCode parentName=\"p\">{`.css`}</inlineCode>{` files from the named module as CSS Modules.\nThis allows Webpack to maintain a separate namespace for every CSS Module, including modules inside dependencies.`}</p>\n    <p>{`This prevents style collisions between sibling modules, but\nit may fail if the module does not actually use CSS Module patterns.`}</p>\n    <h4 {...{\n      \"id\": \"graphqlqueries-flag\"\n    }}><inlineCode parentName=\"h4\">{`graphqlQueries`}</inlineCode>{` flag`}</h4>\n    <p>{`If `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` generates the configuration that tells webpack to look for `}<inlineCode parentName=\"p\">{`.graphql`}</inlineCode>{` files in the dependency and precompile them for better performance.`}</p>\n    <p>{`All GraphQL query files in all modules will appear in the GraphQL playground, but\nthis setting allows you to choose which dependencies have queries you want to debug.`}</p>\n    <h4 {...{\n      \"id\": \"rootcomponents-flag\"\n    }}><inlineCode parentName=\"h4\">{`rootComponents`}</inlineCode>{` flag`}</h4>\n    <p>{`If `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` generates the configuration that tells webpack to look for RootComponent files in a module's `}<inlineCode parentName=\"p\">{`src/RootComponents`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`RootComponents`}</inlineCode>{` subdirectories.`}</p>\n    <p>{`This allows a third-party dependency to provide RootComponents to your app automatically, but\nit may slow down the build if you add too many modules that do not have RootComponents.`}</p>\n    <h4 {...{\n      \"id\": \"upward-flag\"\n    }}><inlineCode parentName=\"h4\">{`upward`}</inlineCode>{` flag`}</h4>\n    <p>{`If `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`configureWebpack()`}</inlineCode>{` generates the configuration that tells weback to look for an `}<inlineCode parentName=\"p\">{`upward.yml`}</inlineCode>{` file in a module's root directory and merge it with the project's root `}<inlineCode parentName=\"p\">{`upward.yml`}</inlineCode>{` file.`}</p>\n    <p>{`This lets third-party dependencies contribute to UPWARD behavior, but\nit may cause collisions or merge problems if the UPWARD files contradict each other.`}</p>\n    <h2 {...{\n      \"id\": \"example\"\n    }}>{`Example`}</h2>\n    <p>{`The following example is taken from `}<inlineCode parentName=\"p\">{`packages/venia-concept/webpack.config.js`}</inlineCode>{`.\nIt represents a typical setup using `}<inlineCode parentName=\"p\">{`configureWebpack`}</inlineCode>{` to generate Webpack config.\nIt also demonstrates that `}<inlineCode parentName=\"p\">{`configureWebpack`}</inlineCode>{` returns a recognizable Webpack object, which you can modify.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const { configureWebpack } = require('@magento/pwa-buildpack');\n\nmodule.exports = async env => {\n    const config = await configureWebpack({\n        context: __dirname,\n        vendor: [\n            '@apollo/client',\n            'apollo-cache-persist',\n            'informed',\n            'react',\n            'react-dom',\n            'react-feather',\n            'react-redux',\n            'react-router-dom',\n            'redux',\n            'redux-actions',\n            'redux-thunk'\n        ],\n        special: {\n            // Treat code originating in the \\`@magento/peregrine\\` module\n            // as ES Modules, just like the project source itself.\n            '@magento/peregrine': {\n                esModules: true\n            }\n            // Treat code originating in the \\`@magento/venia-ui\\` as though\n            // it uses ES Modules, CSS Modules, GraphQL queries, RootComponents,\n            // and UPWARD definitions. This is the right set of flags for a UI\n            // library that makes up the bulk of your project.\n            '@magento/venia-ui': {\n                cssModules: true,\n                esModules: true,\n                graphqlQueries: true,\n                rootComponents: true,\n                upward: true\n            }\n        },\n        env\n    });\n\n    // configureWebpack() returns a regular Webpack configuration object.\n    // You can customize the build by mutating the object here, as in\n    // this example:\n    config.module.noParse = [/braintree\\\\-web\\\\-drop\\\\-in/];\n    // Since it's a regular Webpack configuration, the object supports the\n    // \\`module.noParse\\` option in Webpack, documented here:\n    // https://webpack.js.org/configuration/module/#modulenoparse\n\n    return config;\n};\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}