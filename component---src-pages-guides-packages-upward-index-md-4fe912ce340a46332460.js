"use strict";(self.webpackChunkcommerce_pwa_studio=self.webpackChunkcommerce_pwa_studio||[]).push([[7025],{90388:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return p},default:function(){return l}});var n=t(87462),i=t(63366),r=(t(15007),t(64983)),o=t(91515),s=["components"],p={},d={_frontmatter:p},m=o.Z;function l(e){var a=e.components,t=(0,i.Z)(e,s);return(0,r.mdx)(m,(0,n.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"upward"},"UPWARD"),(0,r.mdx)("p",null,"UPWARD is an acronym for Unified Progressive Web App Response Definition.\nDepending on the context, UPWARD can refer to the definition file or server implementation."),(0,r.mdx)("h2",{id:"definition-file"},"Definition file"),(0,r.mdx)("p",null,"An UPWARD definition file describes how a server delivers and supports an application.\nThe file provide details about server behavior using platform-independent, ",(0,r.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Declarative_programming"},"declarative")," language.\nThis lets an application run on top of any UPWARD-compliant server written in any language because the application is only concerned about the HTTP endpoint behavior from the UPWARD server."),(0,r.mdx)("p",null,"An UPWARD server uses an application's definition file to determine how the server should handle a request and build the response for it."),(0,r.mdx)("h2",{id:"server-implementations"},"Server implementations"),(0,r.mdx)("p",null,"The main purpose of an UPWARD server is to do the following:"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"Receive a request from the application"),(0,r.mdx)("li",{parentName:"ol"},"Determine the appropriate service or process to handle the request"),(0,r.mdx)("li",{parentName:"ol"},"Get the results from the service or process"),(0,r.mdx)("li",{parentName:"ol"},"Build the HTTP response from the results"),(0,r.mdx)("li",{parentName:"ol"},"Send the response back to the application")),(0,r.mdx)("p",null,"PWA Studio provides two UPWARD server implementations:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("a",{parentName:"p",href:"/guides/packages/upward/javascript/"},"upward-js"),": A JavaScript implementation of an UPWARD server.\nThis is often used during development, but it can also be used as a production server if your backend service allows node processes.")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/upward-php"},"upward-php"),": A PHP implementation of an UPWARD server used in conjunction with the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2-upward-connector"},"magento2-upward-connector"),".\nThis is mainly used in production environments where the storefront project code and Magento 2 backend code are on the same server."))),(0,r.mdx)("h3",{id:"upward-server-characteristics"},"UPWARD server characteristics"),(0,r.mdx)("p",null,"UPWARD server implementations have the following characteristics:"),(0,r.mdx)("h4",{id:"idempotent"},"Idempotent"),(0,r.mdx)("p",null,"Requests sent to an UPWARD server are ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/Idempotent"},"idempotent"),".\nThis means that a request to the server has no side effects, so\nit does not matter if you send the same request multiple times to the server."),(0,r.mdx)("h4",{id:"provide-a-simple-communication-strategy-for-services"},"Provide a simple communication strategy for services"),(0,r.mdx)("p",null,"All services provided by the server are available through a single data exchange strategy, such as GraphQL.\nLimiting the methods of communication between a PWA and its resources simplifies PWA development.\nIt removes the responsibility of knowing how to work with different external resources and\nallows developers to concentrate on using a single, familiar technology."),(0,r.mdx)("h4",{id:"contain-no-business-logic"},"Contain no business logic"),(0,r.mdx)("p",null,"Having business logic spread across multiple architectural layers is an antipattern that harms testability.\nThe declarative nature of an UPWARD specification prevents the creation of arbitrary business logic on the server.\nIt pushes this logic into re-usable templates or queries, the frontend application, or the backend services, so it cannot hide in the middle tier."),(0,r.mdx)("h4",{id:"stateless"},"Stateless"),(0,r.mdx)("p",null,"Since an UPWARD server cannot contain business logic, it also cannot hold a local state.\nThis responsibility is also moved to the frontend or backend layer."),(0,r.mdx)("h4",{id:"secure"},"Secure"),(0,r.mdx)("p",null,"UPWARD server implementations must serve data over ",(0,r.mdx)("a",{parentName:"p",href:"https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https"},"HTTPS")," to protect the information and privacy of PWA users."),(0,r.mdx)("h4",{id:"support-caching"},"Support caching"),(0,r.mdx)("p",null,"An UPWARD server itself is not a cache,\nbut it must serve static resources from ",(0,r.mdx)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Content_delivery_network"},"edge servers")," when possible.\nThis supports the need for content that a PWA can ",(0,r.mdx)("a",{parentName:"p",href:"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/"},"cache and reuse when offline"),"."),(0,r.mdx)("h2",{id:"upward-and-pwa-studio-storefronts"},"UPWARD and PWA Studio storefronts"),(0,r.mdx)("p",null,"An UPWARD server sits between a PWA Studio storefront and its resources, such as an Adobe Commerce or Magento Open Source application.\nIt acts as the backend service for the application that proxies requests to connected services or serve static files."),(0,r.mdx)("p",null,(0,r.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"381px"}},"\n      ",(0,r.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"146.875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,r.mdx)("picture",{parentName:"span"},"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/static/0e90ccfa2b160f5eb1e7833afb91e4b3/5530d/upward-server-diagram.webp 320w","/static/0e90ccfa2b160f5eb1e7833afb91e4b3/5aa71/upward-server-diagram.webp 381w"],sizes:"(max-width: 381px) 100vw, 381px",type:"image/webp"}),"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/static/0e90ccfa2b160f5eb1e7833afb91e4b3/dd4a7/upward-server-diagram.png 320w","/static/0e90ccfa2b160f5eb1e7833afb91e4b3/7a1fe/upward-server-diagram.png 381w"],sizes:"(max-width: 381px) 100vw, 381px",type:"image/png"}),"\n          ",(0,r.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/static/0e90ccfa2b160f5eb1e7833afb91e4b3/7a1fe/upward-server-diagram.png",alt:"UPWARD server diagram",title:"UPWARD server diagram",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,r.mdx)("p",null,"See ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/blob/master/packages/upward-spec/RATIONALE.md"},"RATIONALE.md")," in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"upward-spec")," package for a more detailed explanation of the need for an UPWARD server."),(0,r.mdx)("h2",{id:"upward-in-venia"},"UPWARD in Venia"),(0,r.mdx)("p",null,"When you ",(0,r.mdx)("a",{parentName:"p",href:"/tutorials/setup-storefront/"},"set up a new project"),", the scaffolding tool creates an UPWARD definition file called ",(0,r.mdx)("inlineCode",{parentName:"p"},"upward.yml")," in the new project.\nThis file contains references to a ",(0,r.mdx)("inlineCode",{parentName:"p"},"veniaResponse")," object defined in the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/blob/develop/packages/venia-ui/upward.yml"},(0,r.mdx)("inlineCode",{parentName:"a"},"venia-ui")," package"),"."),(0,r.mdx)("p",null,"To deploy your storefront application, pass this file onto an UPWARD server to make it accessible to users."),(0,r.mdx)("h3",{id:"changing-the-default-venia-responses"},"Changing the default Venia responses"),(0,r.mdx)("p",null,"To change the default UPWARD server behavior from a Venia-based project, you must change the configuration file."),(0,r.mdx)("p",null,"The most direct way to do this is by editing the ",(0,r.mdx)("inlineCode",{parentName:"p"},"upward.yml")," file and changing the values for the ",(0,r.mdx)("inlineCode",{parentName:"p"},"status"),", ",(0,r.mdx)("inlineCode",{parentName:"p"},"headers"),", and ",(0,r.mdx)("inlineCode",{parentName:"p"},"body")," properties.\nYou can refer to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"upward.yml")," file in the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/blob/develop/packages/venia-ui/upward.yml"},(0,r.mdx)("inlineCode",{parentName:"a"},"venia-ui")," package")," to see the default instructions and make the necessary changes."),(0,r.mdx)("p",null,"You can also tap into the ",(0,r.mdx)("a",{parentName:"p",href:"/api/buildpack/targets/"},(0,r.mdx)("inlineCode",{parentName:"a"},"transformUpward")," target")," in your storefront or extension project to make changes in a more programmatic language.\nSee the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/pwa-studio/blob/develop/packages/extensions/upward-security-headers/intercept.js"},(0,r.mdx)("inlineCode",{parentName:"a"},"upward-security-headers")," extension")," for an example of this approach."))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-packages-upward-index-md-4fe912ce340a46332460.js.map