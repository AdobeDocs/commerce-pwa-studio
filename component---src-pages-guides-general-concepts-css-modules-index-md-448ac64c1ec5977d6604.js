(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[2767],{388:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return p}});var a=t(22122),o=t(19756),l=(t(15007),t(64983)),i=t(99536),s=["components"],d={},m={_frontmatter:d},r=i.Z;function p(e){var n=e.components,t=(0,o.Z)(e,s);return(0,l.mdx)(r,(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"css-modules"},"CSS modules"),(0,l.mdx)("p",null,"A ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/css-modules/css-modules"},"CSS Module")," is a CSS file that defines class and animation names that are scoped locally by default."),(0,l.mdx)("h2",{id:"overview"},"Overview"),(0,l.mdx)("p",null,"CSS modules let you import your ",(0,l.mdx)("inlineCode",{parentName:"p"},".css")," file into a JavaScript Object with the CSS definitions as properties.\nIt also lets you use the ",(0,l.mdx)("inlineCode",{parentName:"p"},"compose")," property to extend and modularize style definitions."),(0,l.mdx)("p",null,"CSS modules do not have an official specification nor are they a browser feature.\nThey are part of a compilation process that executes against your project to convert scoped classes and selectors into CSS files that the browser can parse and understand."),(0,l.mdx)("p",null,"Tools such as ",(0,l.mdx)("a",{parentName:"p",href:"https://webpack.js.org/"},"Webpack")," are used to perform this compilation process."),(0,l.mdx)("p",null,"PWA Studio supports CSS modules out-of-the-box and using them is the recommended approach for styling components."),(0,l.mdx)("h2",{id:"why-you-should-use-css-modules"},"Why you should use CSS modules"),(0,l.mdx)("p",null,"React lets you split the UI into independent and reusable components, which allows you to update small parts of your UI without refreshing the page."),(0,l.mdx)("p",null,"As React applications grow, the amount of components and layers increases.\nSimple style changes can have unintended side effects on different parts of a complex page."),(0,l.mdx)("p",null,"CSS modules give you the ability to control your element styles in a more granular way.\nThey allow you to build different layers of styles while building your application using a modular approach.\nCSS modules make it easy and fast to achieve tasks such as upgrading buttons, headings, grids, etc."),(0,l.mdx)("p",null,"For more information on reusable components and code sharing in front end development see: ",(0,l.mdx)("a",{parentName:"p",href:"http://getbem.com/"},"Block Element Modifier (BEM)")),(0,l.mdx)("h2",{id:"webpack-configuration"},"Webpack configuration"),(0,l.mdx)("p",null,(0,l.mdx)("a",{parentName:"p",href:"https://webpack.js.org/"},"Webpack")," uses the Webpack ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/webpack-contrib/style-loader"},"style-loader")," and ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/webpack-contrib/css-loader"},"css-loader")," modules to bundle CSS styles using a configuration that looks like the following:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-javascript"},"// webpack configuration\n{\n    test: /\\.css$/,\n    use: [\n        {\n            loader: 'style-loader',\n            options: {\n                injectType:\n                    mode === 'development'\n                        ? 'styleTag'\n                        : 'singletonStyleTag'\n            }\n        },\n        {\n            loader: 'css-loader',\n            options: {\n                importLoaders: 1,\n                localIdentName: '[name]-[local]-[hash:base64:3]',\n                modules: true\n            }\n        }\n    ]\n},\n")),(0,l.mdx)("p",null,"The following is an explanation of the ",(0,l.mdx)("inlineCode",{parentName:"p"},"style-loader")," configuration:"),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"injectType")),(0,l.mdx)("p",null,": Allows to setup how styles will be injected into the DOM."),(0,l.mdx)("p",null,"The following is an explanation of each ",(0,l.mdx)("inlineCode",{parentName:"p"},"css-loader")," configuration:"),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"importLoaders")),(0,l.mdx)("p",null,": Tells Webpack how many loaders to apply to imported resources before applying ",(0,l.mdx)("inlineCode",{parentName:"p"},"css-loader"),"."),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"localIdentName")),(0,l.mdx)("p",null,": Defines the format of the generated local ident.\nIn this case, it is a combination of the following values:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"[name]")," - the component name"),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"[local]")," - the CSS definition name"),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"[hash:base64:3]")," - a random base64 hash of 3 digits")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example:")," ",(0,l.mdx)("inlineCode",{parentName:"p"},"Subtitle-titleHighlighted-rCN")),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"modules")),(0,l.mdx)("p",null,": Enables or disables CSS modules."),(0,l.mdx)("p",null,"For more information about Webpack configuration, follow these links to the official documentation:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("a",{parentName:"li",href:"https://webpack.js.org/loaders/css-loader/#modules"},"Webpack CSS Loader modules documentation")),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("a",{parentName:"li",href:"https://webpack.js.org/loaders/css-loader/#composing"},"Webpack CSS Loader composing documentation"))),(0,l.mdx)("h2",{id:"how-it-works"},"How it works"),(0,l.mdx)("p",null,"The following is a basic example of how styles are used without modules:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-css"},"/* styles.css */\n.heading {\n  color: yellow;\n  background-color: blue;\n  margin: 0 0 1rem;\n}\n.titleHighlighted {\n  padding: 1rem 2rem;\n  text-align: center;\n}\n")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},'// subtitle.js\nimport React, { Component } from "react";\nimport "./styles.css";\n\nclass Subtitle extends Component {\n  render() {\n    return (\n      <div>\n        <h2 className="heading">My Title</h2>\n        <h2 className="titleHighlighted">My Title</h2>\n      </div>\n    );\n  }\n}\n\nexport default Subtitle;\n')),(0,l.mdx)("p",null,"This approach is perfectly valid, but it has several downsides as the amount of components and CSS definitions grows.\nAll your definitions are shared across all components which forces you to reference your elements by its DOM inheritance or create unique definition names."),(0,l.mdx)("p",null,"To avoid this, you can use CSS modules to create a component with locally scoped styles:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},'// subtitle.js\n\nimport React, { Component } from "react";\nimport myStyles from "./styles.css";\n\nclass Subtitle extends Component {\n  render() {\n    return (\n      <div>\n        <h2 className={myStyles.heading}>My Title</h2>\n        <h2 className={myStyles.titleHighlighted}>My Title</h2>\n      </div>\n    );\n  }\n}\n\nexport default Subtitle;\n')),(0,l.mdx)("h2",{id:"creating-and-composing-css-modules"},"Creating and composing CSS modules"),(0,l.mdx)("p",null,"Any valid ",(0,l.mdx)("inlineCode",{parentName:"p"},".css")," file can be a CSS module.\nThe difference is that the style definitions in that file are scoped to specific components instead of globally."),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"composes")," property is used in CSS module files to combine local style definitions.\nThe following example creates a CSS module that applies the ",(0,l.mdx)("inlineCode",{parentName:"p"},".heading")," style definition wherever ",(0,l.mdx)("inlineCode",{parentName:"p"},".titleHighlighted")," is used."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-css"},"/** ./styles.css */\n.heading {\n  color: yellow;\n  background-color: blue;\n  margin: 0 0 1rem;\n}\n\n.titleHighlighted {\n  composes: heading;\n  padding: 1rem 2rem;\n  text-align: center;\n}\n")),(0,l.mdx)("h3",{id:"composing-from-another-file"},"Composing from another file"),(0,l.mdx)("p",null,"By default, ",(0,l.mdx)("inlineCode",{parentName:"p"},"composes")," looks for style definitions in the local file.\nTo reuse a definition from another file, use the ",(0,l.mdx)("inlineCode",{parentName:"p"},"from")," keyword."),(0,l.mdx)("p",null,"The following example ",(0,l.mdx)("inlineCode",{parentName:"p"},"composes")," the ",(0,l.mdx)("inlineCode",{parentName:"p"},"heading")," definition with the ",(0,l.mdx)("inlineCode",{parentName:"p"},"baseHeading")," definition from the ",(0,l.mdx)("inlineCode",{parentName:"p"},"default_heading.css")," file."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-css"},'/* default_heading.css */\n.baseHeading {\n  color: yellow;\n  background-color: blue;\n  margin: 0 0 1rem;\n}\n\n/* styles.css */\n.heading {\n  composes: baseHeading from "./default_heading.css";\n  font-weight: bold;\n}\n')),(0,l.mdx)("h2",{id:"importing-and-applying-styles"},"Importing and applying styles"),(0,l.mdx)("p",null,"The syntax for importing a CSS module is the same as importing a JavaScript module."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},'import myStyles from "./styles.css";\n')),(0,l.mdx)("p",null,"The style definitions in the CSS module are available as properties of ",(0,l.mdx)("inlineCode",{parentName:"p"},"myStyles"),".\nThey are used as values in an element's ",(0,l.mdx)("inlineCode",{parentName:"p"},"className")," attribute."),(0,l.mdx)("p",null,"The following example defines a ",(0,l.mdx)("inlineCode",{parentName:"p"},"Subtitle")," component which uses the ",(0,l.mdx)("inlineCode",{parentName:"p"},"titleHighlighted")," style definition:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},"// ./subtitle.js\nimport React, { Component } from 'react';\nimport myStyles from './styles.css';\n\nexport Subtitle extends Component\n{\n    render() {\n      return (\n          <div>\n              <h2 className={ myStyles.titleHighlighted }>My Subtitle</h2>\n          </div>\n        );\n    }\n}\n\nexport default Subtitle;\n")),(0,l.mdx)("p",null,"This example assigns a style based on component logic:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-jsx"},"  render() {\n    const { isHighlighted, title } = this.props;\n\n    // we evaluate which class to apply, based on a prop received\n    const finalStyle = isHighlighted ? myStyles.titleHighlighted : myStyles.heading;\n\n    return(\n      <div className={ finalStyle }>\n        <h2>{ title }</h2>\n      </div>\n    );\n  }\n")))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-general-concepts-css-modules-index-md-448ac64c1ec5977d6604.js.map