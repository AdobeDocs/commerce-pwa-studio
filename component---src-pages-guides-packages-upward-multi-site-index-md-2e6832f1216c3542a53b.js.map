{"version":3,"file":"component---src-pages-guides-packages-upward-multi-site-index-md-2e6832f1216c3542a53b.js","mappings":"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","sources":["webpack://commerce-pwa-studio/./src/pages/guides/packages/upward/multi-site/index.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-pwa-studio/commerce-pwa-studio/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"multiple-websites-with-upward\"\n    }}>{`Multiple websites with UPWARD`}</h1>\n    <p>{`This topic describes how to configure your UPWARD server to run multiple PWA sites from a single Magento Open Source or Adobe Commerce backend.`}</p>\n    <h2 {...{\n      \"id\": \"the-upward-connector-module\"\n    }}>{`The UPWARD connector module`}</h2>\n    <p>{`When you use the PWA scaffolding tool to create a PWA Studio project, one of the many modules installed is the UPWARD PHP connector moduleâ€”`}<inlineCode parentName=\"p\">{`magento2-upward-connector`}</inlineCode>{`. This module provides a CLI to help you configure different PWA sites to run from a single Commerce or Open Source server.`}</p>\n    <h2 {...{\n      \"id\": \"configuring-the-upward-server\"\n    }}>{`Configuring the UPWARD server`}</h2>\n    <p>{`The first step is to configure the UPWARD server to access the different PWA sites you want to deploy. And the CLI provided by the UPWARD module is how you do it.`}</p>\n    <p>{`But before we get to the specifics, here's the overview of what you are actually doing. When you execute the CLI commands, you're actually adding `}<inlineCode parentName=\"p\">{`pwa_paths`}</inlineCode>{` to the `}<inlineCode parentName=\"p\">{`env.php`}</inlineCode>{` file. The commands specify the paths to the `}<inlineCode parentName=\"p\">{`upward.yml`}</inlineCode>{` configuration for each PWA site you want to deploy. The following  example shows what an `}<inlineCode parentName=\"p\">{`env.php`}</inlineCode>{` configuration file may look like AFTER using the CLI to add two different PWA sites to the `}<inlineCode parentName=\"p\">{`default`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`website`}</inlineCode>{` configurations:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// ...\n'downloadable_domains' => [\n    // ...\n],\n# New configuration point\n'pwa_path' => [\n    'default' => [\n        'default' => '/var/www/html/my-pwa-site/dist/upward.yml'\n    ],\n    'website' => [\n        '<website_code>' => '/var/www/html/my-awesome-pwa-site/dist/upward.yml'\n    ],\n    'store' => [\n        '<store_code>' => '' # Setting an empty string (or \\`false\\` value) will serve the specified default site (my-pwa-site)\n    ]\n]\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"using-upward-cli-commands\"\n    }}>{`Using UPWARD CLI commands`}</h2>\n    <p>{`The UPWARD module commands provide a convenient way to configure the server to deploy different PWA sites. The following examples show common usage patterns.`}</p>\n    <p><strong parentName=\"p\">{`Set UPWARD paths with `}<inlineCode parentName=\"strong\">{`scopeType`}</inlineCode>{` and `}<inlineCode parentName=\"strong\">{`scopeCode`}</inlineCode>{`:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`bin/magento pwa:upward:set --path /var/www/html/pwa/dist/upward.yml --scopeType store --scopeCode <store_code>\n`}</code></pre>\n    <p>{`To find the paths of your PWA sites (by scope) as shown above for the store scope, use one of the following commands:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`bin/magento store:list`}</inlineCode>{` (for store scope)`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`bin/magento store:website:list`}</inlineCode>{` (for store and website scopes)`}</li>\n    </ul>\n    <p>{`Paths to `}<inlineCode parentName=\"p\">{`upward.yml`}</inlineCode>{` can be relative: `}<inlineCode parentName=\"p\">{`pwa/dist/upward.yml`}</inlineCode>{` or absolute: `}<inlineCode parentName=\"p\">{`/var/www/html/pwa/dist/upward.yml`}</inlineCode>{`.`}</p>\n    <p>{`To serve the default store front (non-PWA), use an empty string:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`bin/magento pwa:upward:set\n`}</code></pre>\n    <p>{`The UPWARD path configurations work the same as other store configurations: The config settings fall up in scope from `}<inlineCode parentName=\"p\">{`store`}</inlineCode>{` > `}<inlineCode parentName=\"p\">{`website`}</inlineCode>{` > `}<inlineCode parentName=\"p\">{`global`}</inlineCode>{` (default), trying to serve the most specific, available site scope first.`}</p>\n    <h2 {...{\n      \"id\": \"creating-multiple-bundles\"\n    }}>{`Creating multiple bundles`}</h2>\n    <p>{`You can also generate unique bundles per website within a single scaffolded project.`}</p>\n    <p>{`For example, if you want to deploy both French and German versions of your site, you could use the following commands to configure your UPWARD server:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`MAGENTO_BACKEND_URL=https://french.mysite.mg yarn build\nmv dist dist-french\nMAGENTO_BACKEND_URL=https://german.mysite.mg yarn build\nmv dist dist-german\n \n# copy these bundles to your Magento root and set configuration variables\nbin/magento pwa:upward:set --path ./dist-french/upward.yml --scopeType website --scopeCode fr\nbin/magento pwa:upward:set --path ./dist-german/upward.yml --scopeType website --scopeCode de\n`}</code></pre>\n    <p>{`With this configuration, a single UPWARD server can process requests for many different website bundles.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutProperties","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}